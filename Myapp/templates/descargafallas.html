{% load static %}
{% load crispy_forms_tags %}
<html>
<head>
    <meta charset="utf-8">
    <title>Descarga de Fallas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css">
    <link rel="" href="https://cdn.datatables.net/fixedheader/3.1.6/css/fixedHeader.dataTables.min.css">
    <style>
        form {
            margin: 20px;
            padding: 20px;
            background-color: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .form-control {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
<P></P>
<center>
    <h2>MODULO DESCARGA FALLAS</h2>
</center>
<form id="descargafiltro" method="post" action="{% url 'export_filtered_to_excel' %}" onsubmit="capturarValorCheckbox()">
    {% csrf_token %}
    <div class="col-md-4">
        <label for="inputfechadesde" class="form-label">Desde:</label>
        <input type="date" class="form-control" name="fechadesde" id="inputfechadesde">
    </div>
    <div class="col-md-4">
        <label for="inputfechahasta" class="form-label">Hasta:</label>
        <input type="date" class="form-control" name="fechahasta" id="inputfechahasta">
    </div>
    <!-- Si decides utilizar el campo statusfalla en el futuro, descomenta y completa este bloque -->
    <!--
    <div class="col-md-4">
        <label for="inputstatus" class="form-label">Status:</label>
        <select id="inputstatus" class="form-select" name="statusfalla" required>
            <option>Todos los status</option>
            {% for status_option in status_options %}
                <option value="{{ status_option.id }}">{{ status_option.nombre }}</option>
            {% endfor %}
        </select>
    </div>
    -->
    <center>
    <button type="submit" class="btn btn-success btn-sm">Filtra y Descarga</button>
    <a href="{% url 'export_to_excel' %}" class="btn btn-success btn-sm">Descargar </a>
    <button type="button" class="btn btn-info btn-sm" id="cerrarVentana">Cerrar</button>
    </center>
</form>
<center>
    <fieldset>
        <div id="version">
            <h6>Ver. Versión 1.0.0 (01/04/2022)</h6>
            <img src="{% static "img/logosistema.png" %}" > <br>
            <h8>Copyright ® 2019</h8>
            <br>
            <h8>SPOTGAMING S.A.S</h8>
            <br>
        </div>
    </fieldset>
</center>
</body>
<script>
    document.getElementById("cerrarVentana").addEventListener("click", function() {
        window.close();
    });
</script>
</html>