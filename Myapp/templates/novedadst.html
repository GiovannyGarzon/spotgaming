{% extends 'menusoporte.html' %}
{% load crispy_forms_tags %}
{% block content%}
<h1> Novedad Falla</h1>
<p></p>
<form class="row g-3" action="{% url 'guardarfalla' %}" method="POST">
    {% csrf_token %}
    <div class="col-md-4">
        <label for="inputnumero" class="form-label">Numero_FAL:</label>
        <input type="texto" class="form-control" id="inputnumero" name="numero" readonly onmousedown="return false;">
    </div>
    <div class="col-md-4">
        <label for="inputstatus" class="form-label">Status:</label>
        <select id="inputstatus" class="form-select" name="statusfalla" required>
            <option value="">Todos los Status...</option>
            <option>PENDIENTE</option>
            <option>ATENDIDA</option>
            <option>INSPIRED</option>
            <option>REJECT</option>
            <option>SOLUCIONADA</option>
            <option>CERRADA</option>
        </select>
    </div>
    <div class="col-md-4">
        <label for="inputCodigoMaquina" class="form-label">Código Maquina:</label>
        <select id="inputCodigoMaquina" class="form-select" name="codigomaquina" required>
            <option value="">Todas las Maquinas...</option>
            {% for Maquina in maquinas %}
            <option value="{{Maquina.id}}">{{Maquina.id_codigo}}</option>
            {% endfor %}
        </select>
    </div>
    <div class="col-md-6">
        <label for="inpucliente" class="form-label">Cliente:</label>
        <select id="inpucliente" class="form-select" name="cliente" required>
            <option value="">Todos los clientes...</option>
            {% for Cliente in clientes %}
            <option value="{{Cliente.id}}">{{Cliente.nombre}}</option>
            {% endfor %}
        </select>
    </div>
    <div class="col-md-6">
        <label for="inputsala" class="form-label">Sala /Punto:</label>
        <select id="inputsala" class="form-select" name="sala" required>
            <option value="">Todos las Salas / Puntos...</option>
            {% for Sala in salas %}
            <option value="{{Sala.id}}">{{Sala.nombre}}</option>
            {% endfor %}
        </select>
    </div>
    <div class="col-md-4">
        <label for="inputfechareporte" class="form-label">Fecha Reporte:</label>
        <input type="date" class="form-control" name="fechareporte" id="inputfechareporte" required>
    </div>
    <div class="col-md-4">
        <label for="inputfechaatencion" class="form-label">Fecha Atención:</label>
        <input type="date" class="form-control" name="fechaatencion" id="inputfechaatencion">
    </div>
    <div class="col-md-4">
        <label for="inputfechareject" class="form-label">Fecha Reject:</label>
        <input type="date" class="form-control" name="fechareject" id="inputfechareject">
    </div>
    <div class="col-md-4">
        <label for="inputreporta" class="form-label">Rportado por:</label>
        <input type="text" class="form-control" name="reportadopor" id="inputreporta" required>
    </div>
    <div class="col-md-4">
        <label for="inputtelefono" class="form-label">Telefono de Contacto:</label>
        <input type="text" class="form-control" name="telefono" id="inputtelefono" required>
    </div>
    <div class="col-md-4">
        <label for="inputprioridad" class="form-label">Prioridad:</label>
        <select id="inputprioridad" class="form-select" name="prioridad" required>
            <option value="">Seleccione...</option>
            <option>BAJA</option>
            <option>MEDIA</option>
            <option>ALATA</option>
        </select>
    </div>
    <div class="col-md-4">
        <label for="inputfechasolucion" class="form-label">Fecha Solución:</label>
        <input type="date" class="form-control" name="fechasolucion" id="inputfechasolucion">
    </div>
    <div class="col-md-4">
        <label for="inputfechacierre" class="form-label">Fecha Cierre:</label>
        <input type="date" class="form-control" name="fechacierre" id="inputfechacierre">
    </div>
    <div class="col-md-4">
        <label for="inputestado" class="form-label">Maquina Apagada:</label>
        <select id="inputestado" class="form-select" name="apagada">
            <option value="1">Si</option>
            <option value="0">No</option>
        </select>
    </div>
    <div class="col-md-6">
        <label for="inputjuego" class="form-label">Juego:</label>
        <select id="inputjuego" class="form-select" name="juego">
            <option value="">Ningun Juego...</option>
            {% for Juego in juegos %}
            <option value="{{Juego.id}}">{{Juego.nombre}}</option>
            {% endfor %}
        </select>
    </div>
    <div class="col-md-6">
        <label for="inputCodigo" class="form-label">Código Falla:</label>
        <select id="inputCodigo" class="form-select" name="codfalla" required>
            <option value="">Todos los Errores...</option>
            {% for CodigoFalla in fallas %}
            <option value="{{CodigoFalla.id}}">{{CodigoFalla.descripcion_sp}}</option>
            {% endfor %}
        </select>
    </div>
    <div class="col-md-48">
        <label for="inputdescripcion" class="form-label">Descripción Falla:</label>
        <input type="texto" class="form-control" id="inputdescripcion" name="descripcion" required>
    </div>
    <div class="col-md-6">
        <label for="inputprocedimiento" class="form-label">Procedimiento SFTP:</label>
        <select id="inputprocedimiento" class="form-select" name="procedimientos" required>
            <option value="">Todos los Procedimientos...</option>
            {% for ProcedimientosSFP in procedimientos %}
            <option value="{{ProcedimientosSFP.id}}">{{ProcedimientosSFP.titulo}}</option>
            {% endfor %}
        </select>
    </div>
    <div class="col-md-6">
        <label for="inputreportada" class="form-label">Falla Registrada Por:</label>
        <input type="texto" class="form-control" id="inputreportada" name="reportadapor" required>
    </div>
    <div class="col-md-6">
        <label for="inputpresponsable" class="form-label">Responsable:</label>
        <select id="inputpresponsable" class="form-select" name="responsable" required>
            <option value="">Todos los tecnicos...</option>
            {% for Tecnico in tecnicos %}
            <option value="{{Tecnico.id}}">{{Tecnico.nombre}}</option>
            {% endfor %}
        </select>
    </div>
    <div class="col-md-6">
        <label for="inputatencion" class="form-label">Nivel de Atención:</label>
        <select id="inputatencion" class="form-select" name="nivelatencion" required>
            <option value="">Seleccione...</option>
            <option>NIVEL 1 - TECNICO LOCAL DE SALA</option>
            <option>NIVEL 2 - SOPORTE REMOTO</option>
            <option>NIVEL 3 - TECNICO PMV ENVIADO</option>
        </select>
    </div>
    <div class="col-md-6">
        <label for="inputresuelto" class="form-label">Resuelto por:</label>
        <select id="inputresuelto" class="form-select" name="resueltapor" required>
            <option value="">Seleccione...</option>
            <option>SOPORTE SPOT GAMING</option>
            <option>SOPORTE INSPIRED</option>
        </select>
    </div>
    <div class="col-md-6">
        <label for="inputsolucion" class="form-label">Solucion:</label>
        <select id="inputsolucion" class="form-select" name="solucion">
            <option>Todos los Procedimientos...</option>
            {% for SolucionFalla in soluciones %}
            <option value="{{SolucionFalla.id}}">{{SolucionFalla.descripcion_sp}}</option>
            {% endfor %}
        </select>
    </div>
    <div class="col-md-48">
        <label for="inputseguimiento" class="form-label">Ultimo Seguimiento:</label>
        <input type="texto" class="form-control" id="inputseguimiento" name="ultimoseguimeinto">
    </div>
    <table border="0" width="98%" id="table2" cellspacing="1" cellpadding="0" style="border: 1px solid #000000; padding-left:0; padding-right:0">
        <tbody>
        <tr>
            <td bgcolor="#808080" align="center">
                <b><font face="Tahoma" size="2" color="#FFFFFF">Seguimiento (Historial)</font></b></td</tr>
        </tbody>
    </table>
    <table class="table table-bordered">
        <thead>
        <tr>
            <!--<th scope="col">ID</th>--!>
            <th scope="col">ID</th>
            <th scope="col">Fecha Novedad</th>
            <th scope="col">Responsable</th>
            <th scope="col">Status</th>
            <th scope="col">Seguimiento / Novedades</th>
            <th scope="col">Opciones</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td WIDTH="80" HEIGHT="80">
                {% for asignacion in asignaciones %}
                <input type="text" class="form-control" value="{{asignacion.id}}" readonly onmousedown="return false;">
                {% endfor %}
            </td>
            <td>
                {% for asignacion in asignaciones %}
                <input type="text" class="form-control" id="textcliente" value="{{asignacion.clientes}}" readonly onmousedown="return false;">
                {% endfor %}
            </td>
            <td>
                {% for asignacion in asignaciones %}
                <input id="contacto" type="text" class="form-control" value="{{asignacion.contacto}}" readonly onmousedown="return false;">
                {% endfor %}
            </td>
            <td>
                {% for asignacion in asignaciones %}
                <input type="text" class="form-control" value="{{asignacion.stado}}" readonly onmousedown="return false;">
                {% endfor %}
            </td>
            <td>
                {% for asignacion in asignaciones %}
                <input type="text" class="form-control" value="{{asignacion.fecha_asignacion}}" readonly onmousedown="return false;">
                {% endfor %}
            </td>
            <td WIDTH="140" HEIGHT="140">
                {% for asignacion in asignaciones %}
                <a href="{% url 'asignar'%}" type="submit" class="btn btn-danger">Editar</a> &nbsp;  <button type="button" class="btn btn-danger">Ver</button>
                {% endfor %}
            </td>
        </tr>
        </tbody>
    </table>
      <p></p>
      <center>
          <fieldset id="borde2">
              <a type="button" class="btn btn-info">ENVIAR Incident</a>
              <a type="button" class="btn btn-info">REJECT Incident</a>
              <a type="button" class="btn btn-info">ESCALAR Incident</a>
              <a type="button" class="btn btn-info">+ Novedades</a>
              <a type="button" class="btn btn-info">Anexos</a><br><br>
              <a type="button" class="btn btn-info">Servicio Tecnico</a>
              <a type="button" class="btn btn-info">Solicitud de Despacho</a>
              <a type="button" class="btn btn-info">Imprimir</a>
              <button type="submit" class="btn btn-info">Crear</button>
              <a href="{% url 'listareportedefallas'%}" type="button" class="btn btn-info">Cerrar</a>
        </fieldset>
      </center>
    </form>
{% endblock%}